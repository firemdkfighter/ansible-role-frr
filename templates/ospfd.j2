{% if hostvars[inventory_hostname]['quagga_cumulus'] is defined and
      hostvars[inventory_hostname]['quagga_cumulus'] == 'true' %}
{{ '## ' + hostvars[inventory_hostname]['quagga_ospfd_service'] ~ '-' ~ item ~
   '.conf' }}
{% elif (hostvars[inventory_hostname]['quagga_cumulus'] is defined and
         hostvars[inventory_hostname]['quagga_cumulus'] != 'true') or
         hostvars[inventory_hostname]['quagga_cumulus'] is not defined %}
{{ '## ' + hostvars[inventory_hostname]['quagga_ospfd_service'] + '.conf' }}
{% endif %}
{{ '# ' + ansible_managed }}
{{ '# ' + 'Do not edit manually' }}

{{ '!' }}
{{ '! Zebra configuration saved from vty' }}
{{ '!    ' + ansible_date_time.date + ' ' + ansible_date_time.time }}
{{ '!' }}
{% if hostvars[inventory_hostname]['quagga_zebra_conft'] is defined %}
{% for z in hostvars[inventory_hostname]['quagga_zebra_conft'] %}
{% include 'zebra_generic.j2' %}
{% if z.service is defined and z.service != '' %}
{% include 'zebra_service.j2' %}
{% endif %}
{% if z.log is defined and z.log != '' %}
{% include 'zebra_log.j2' %}
{% endif %}
{{ '!' }}
{% if hostvars[inventory_hostname]['quagga_interfaces'] is defined and
      hostvars[inventory_hostname]['quagga_interfaces'] != '' %}
{% include 'ospfd_interfaces.j2' %}
{% endif %}
{% if (hostvars[inventory_hostname]['quagga_cumulus'] is defined and
       hostvars[inventory_hostname]['quagga_cumulus'] == 'true') and
      (hostvars[inventory_hostname]['quagga_router_ospf_multi'] is defined and
       hostvars[inventory_hostname]['quagga_router_ospf_multi'] != '') %}
{% include 'router_ospf_multi.j2' %}
{% elif (hostvars[inventory_hostname]['quagga_cumulus'] is defined and
         hostvars[inventory_hostname]['quagga_cumulus'] != 'true') and
        (hostvars[inventory_hostname]['quagga_router_ospf'] is defined and
         hostvars[inventory_hostname]['quagga_router_ospf'] != '') %}
{% include 'router_ospf.j2' %}
{% endif %}
{{ '!' }}
{% if hostvars[inventory_hostname]['quagga_access_list'] is defined and
      hostvars[inventory_hostname]['quagga_access_list'] != '' %}
{% include 'zebra_acl.j2' %}
{% endif %}
{{ '!' }}
{% if hostvars[inventory_hostname]['quagga_prefix_list'] is defined and
      hostvars[inventory_hostname]['quagga_prefix_list'] != '' %}
{% include 'zebra_prefix.j2' %}
{% endif %}
{{ '!' }}
{% if hostvars[inventory_hostname]['quagga_route_map'] is defined and
      hostvars[inventory_hostname]['quagga_route_map'] != '' %}
{% include 'zebra_route_map.j2' %}
{% endif %}
{% if z.line is defined and z.line != '' %}
{% include 'zebra_vty.j2' %}
{% endif %}
{{ '!' }}
{% endfor %}
{% endif %}
